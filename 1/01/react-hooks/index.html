<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>
         - my101du Blog
      </title>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    
    <meta name="theme-color" content="#000000" />
    
    <meta http-equiv="window-target" content="_top" />
    
    
    <meta name="description" content="å…³äº Hook React 16.7.0-alpha ç‰ˆæœ¬æ¨å‡ºçš„æ–°ç‰¹æ€§ React Hooks è¦è§£å†³çš„é—®é¢˜æ˜¯çŠ¶æ€å…±äº«ï¼Œæ˜¯ç»§ render-props å’Œ higher-order components ä¹‹åçš„ç¬¬ä¸‰ç§çŠ¶æ€å…±äº«æ–¹æ¡ˆï¼Œä¸ä¼šäº§ç”Ÿ JSX åµŒå¥—åœ°ç‹±é—®é¢˜ã€‚ çŠ¶æ€å…±äº«å¯èƒ½æè¿°çš„ä¸æ°å½“" />
    <meta name="generator" content="Hugo 0.70.0 with theme pure" />
    <title> - my101du Blog</title>
    
    
    <link rel="stylesheet" href="https://my101du.github.io/css/style.min.7dc20efbc53647d41aa9ddea0c48e59300223d084e66ea0cbe7c30bd88903acc.css">
    
    <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css" async>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css" async>
    <meta property="og:title" content="" />
<meta property="og:description" content="å…³äº Hook React 16.7.0-alpha ç‰ˆæœ¬æ¨å‡ºçš„æ–°ç‰¹æ€§ React Hooks è¦è§£å†³çš„é—®é¢˜æ˜¯çŠ¶æ€å…±äº«ï¼Œæ˜¯ç»§ render-props å’Œ higher-order components ä¹‹åçš„ç¬¬ä¸‰ç§çŠ¶æ€å…±äº«æ–¹æ¡ˆï¼Œä¸ä¼šäº§ç”Ÿ JSX åµŒå¥—åœ°ç‹±é—®é¢˜ã€‚ çŠ¶æ€å…±äº«å¯èƒ½æè¿°çš„ä¸æ°å½“" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://my101du.github.io/1/01/react-hooks/" />

<meta itemprop="name" content="">
<meta itemprop="description" content="å…³äº Hook React 16.7.0-alpha ç‰ˆæœ¬æ¨å‡ºçš„æ–°ç‰¹æ€§ React Hooks è¦è§£å†³çš„é—®é¢˜æ˜¯çŠ¶æ€å…±äº«ï¼Œæ˜¯ç»§ render-props å’Œ higher-order components ä¹‹åçš„ç¬¬ä¸‰ç§çŠ¶æ€å…±äº«æ–¹æ¡ˆï¼Œä¸ä¼šäº§ç”Ÿ JSX åµŒå¥—åœ°ç‹±é—®é¢˜ã€‚ çŠ¶æ€å…±äº«å¯èƒ½æè¿°çš„ä¸æ°å½“">

<meta itemprop="wordCount" content="3641">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="å…³äº Hook React 16.7.0-alpha ç‰ˆæœ¬æ¨å‡ºçš„æ–°ç‰¹æ€§ React Hooks è¦è§£å†³çš„é—®é¢˜æ˜¯çŠ¶æ€å…±äº«ï¼Œæ˜¯ç»§ render-props å’Œ higher-order components ä¹‹åçš„ç¬¬ä¸‰ç§çŠ¶æ€å…±äº«æ–¹æ¡ˆï¼Œä¸ä¼šäº§ç”Ÿ JSX åµŒå¥—åœ°ç‹±é—®é¢˜ã€‚ çŠ¶æ€å…±äº«å¯èƒ½æè¿°çš„ä¸æ°å½“"/>

    <!--[if lte IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
      <![endif]-->

    <!--[if lt IE 9]>
        <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
      <![endif]-->
  </head>

  
  

  <body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader">
    <div class="slimContent">
      <div class="navbar-header">
        <div class="profile-block text-center">
          <a id="avatar" href="https://github.com/my101du" target="_blank">
            <img class="img-circle img-rotate" src="https://avatars2.githubusercontent.com/u/1332645?s=460&amp;u=dc114d6baad010456a5af87c4cc2df0694ff2b1c&amp;v=4" width="200" height="200">
          </a>
          <h2 id="name" class="hidden-xs hidden-sm">my101du</h2>
          <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
          <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>Dongguan, China</small>
        </div><div class="search" id="search-form-wrap">
    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="æœç´¢" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i
                        class="icon icon-search"></i></button>
            </span>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."
                        x-webkit-speech />
                    <button type="button" class="close ins-close ins-selectable" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">Ã—</span></button>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
    </form>
</div>
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
        <ul class="nav navbar-nav main-nav">
            <li class="menu-item menu-item-home">
                <a href="/">
                    <i class="icon icon-home-fill"></i>
                  <span class="menu-title">Home</span>
                </a>
            </li>
            <li class="menu-item menu-item-archives">
                <a href="/posts/">
                    <i class="icon icon-archives-fill"></i>
                  <span class="menu-title">Archives</span>
                </a>
            </li>
            <li class="menu-item menu-item-categories">
                <a href="/categories/">
                    <i class="icon icon-folder"></i>
                  <span class="menu-title">Categories</span>
                </a>
            </li>
            <li class="menu-item menu-item-tags">
                <a href="/tags/">
                    <i class="icon icon-tags"></i>
                  <span class="menu-title">Tags</span>
                </a>
            </li>
            <li class="menu-item menu-item-about">
                <a href="/about/">
                    <i class="icon icon-cup-fill"></i>
                  <span class="menu-title">About</span>
                </a>
            </li>
        </ul>
      </nav>
    </div>
  </header>

<aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">å…¬å‘Š</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content"><p>enjoy~</p>
            </div>
        </div>
    </div>
</div>

      <div class="widget">
    <h3 class="widget-title"> åˆ†ç±»</h3>
    <div class="widget-body">
        <ul class="category-list">
        </ul>
    </div>
</div>
      <div class="widget">
    <h3 class="widget-title"> æ ‡ç­¾</h3>
    <div class="widget-body">
        <ul class="tag-list">
            
        </ul>

    </div>
</div>
      
<div class="widget">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget-body">
        <ul class="recent-post-list list-unstyled no-thumbnail">
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://my101du.github.io/1/01/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="title"></a>
                    </p>
                    <p class="item-date">
                        <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://my101du.github.io/1/01/bootstrap-%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E4%B8%8E%E6%8A%80%E5%B7%A7/" class="title"></a>
                    </p>
                    <p class="item-date">
                        <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://my101du.github.io/1/01/bootstrap4/" class="title"></a>
                    </p>
                    <p class="item-date">
                        <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://my101du.github.io/1/01/css-%E5%8A%A8%E7%94%BB/" class="title"></a>
                    </p>
                    <p class="item-date">
                        <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://my101du.github.io/1/01/css-%E5%8A%A8%E7%94%BB%E5%BA%93-animate.css/" class="title"></a>
                    </p>
                    <p class="item-date">
                        <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
                    </p>
                </div>
            </li>
        </ul>
    </div>
</div>
  </div>
</aside>

    
    
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <h4 class="toc-title">æ–‡ç« ç›®å½•</h4>
    <nav id="toc" class="js-toc toc">

    </nav>
  </div>
</aside>
<main class="main" role="main"><div class="content">
  <article id="-" class="article article-type-" itemscope
    itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      <h1 itemprop="name">
  <a
    class="article-title"
    href="/1/01/react-hooks/"
    ></a
  >
</h1>

      <div class="article-meta">
        

        <span class="post-comment"><i class="icon icon-comment"></i>&nbsp;<a href="/1/01/react-hooks/#comments"
            class="article-comment-link">è¯„è®º</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">å­—æ•°ç»Ÿè®¡: 3641å­—</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">é˜…è¯»æ—¶é•¿: 8åˆ† </span>
      </div>
    </div>
    <div class="article-entry marked-body js-toc-content" itemprop="articleBody">
      <h1 id="å…³äº-hook">å…³äº Hook</h1>
<p>React 16.7.0-alpha ç‰ˆæœ¬æ¨å‡ºçš„æ–°ç‰¹æ€§</p>
<p>React Hooks è¦è§£å†³çš„é—®é¢˜æ˜¯çŠ¶æ€å…±äº«ï¼Œæ˜¯ç»§ render-props å’Œ higher-order components ä¹‹åçš„ç¬¬ä¸‰ç§çŠ¶æ€å…±äº«æ–¹æ¡ˆï¼Œä¸ä¼šäº§ç”Ÿ JSX åµŒå¥—åœ°ç‹±é—®é¢˜ã€‚</p>
<p>çŠ¶æ€å…±äº«å¯èƒ½æè¿°çš„ä¸æ°å½“ï¼Œç§°ä¸ºçŠ¶æ€é€»è¾‘å¤ç”¨ä¼šæ›´æ°å½“ï¼Œå› ä¸ºåªå…±äº«æ•°æ®å¤„ç†é€»è¾‘ï¼Œä¸ä¼šå…±äº«æ•°æ®æœ¬èº«ã€‚</p>
<p>Hooks are a new addition in React 16.8. They let you <strong>use state and other React features without writing a class</strong>.</p>
<p>A Hook is a special <strong>function</strong> that lets you â€œhook intoâ€ React features.  (å¦‚ setState,is a Hook that lets you add React state to function components.)</p>
<p>ä¸ºä½•è¦ç”¨ hook?</p>
<p>å› ä¸ºä¹‹å‰å†™äº†å¾ˆå¤š function component,(ä¹Ÿæˆä¸º stateless component)   å¦‚æœéœ€è¦æ·»åŠ  state, åªèƒ½æŠŠä»–ä»¬è½¬æ¢æˆ classã€‚
ç°åœ¨æœ‰äº† Hook, å°±ä¸éœ€è¦äº†~ å¯ç›´æ¥åœ¨ function component å†…éƒ¨ä½¿ç”¨ Hook ç®¡ç† state</p>
<h1 id="ä¹‹å‰çŠ¶æ€ç®¡ç†çš„ä¸€äº›æ–¹æ¡ˆ-redux-mobx-ç­‰">ä¹‹å‰çŠ¶æ€ç®¡ç†çš„ä¸€äº›æ–¹æ¡ˆ redux mobx ç­‰</h1>
<p>å°±æ˜¯è¦è§£å†³ç›¸é‚»ç»„ä»¶é€šä¿¡é—®é¢˜.</p>
<p>å¦‚æœç”¨â€œçŠ¶æ€æå‡â€</p>
<ol>
<li>å­ç»„ä»¶çš„æ›´æ–°ï¼Œä¼šè§¦å‘è´Ÿè´£ä¸‹å‘çŠ¶æ€çš„çˆ¶ç»„ä»¶çš„æ•´ä½“æ›´æ–°(Context ä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜),äº§ç”Ÿå¾ˆå¤š PureComponent  shouldComponentUpdate ç­‰</li>
<li>é€»è¾‘è¾ƒå¤š</li>
</ol>
<p>æ‰€ä»¥&quot;çŠ¶æ€ç®¡ç†&quot;ä¼šæ›´å¥½ã€‚</p>
<p>ä½¿ç”¨mobxè€Œä¸å†ä½¿ç”¨setStateåŸå› æœ‰å¦‚ä¸‹å‡ ä¸ªï¼ˆä¸ªäººç†è§£ï¼‰</p>
<p>1 setSate ä¸æ˜¯åŒæ­¥æ“ä½œï¼Œå½“æˆ‘ä»¬é€šè¿‡setstateä¿®æ”¹stateæ•°æ®åï¼Œåé¢çš„é€»è¾‘ç«‹å³å–å€¼æ˜¯æ—§å€¼ï¼Œstateçš„æ–°å€¼åœ¨ä¸‹ä¸€æ¬¡renderæ—¶è·å–åˆ°ã€‚
2 å¦‚æœå°†æ‰€æœ‰çš„æ•°æ®éƒ½ä¿å­˜åœ¨stateä¸­ï¼Œé‚£ä¹ˆä¾‹å¦‚å®šæ—¶å™¨ï¼Œå¼‚æ­¥è¯·æ±‚è¿”å›ç­‰äºUIæ¸²æŸ“å®é™…æ— å…³çš„æ•°æ®ä¹ŸåŒæ ·ä¼šå¯¼è‡´ç»„ä»¶æ‰§è¡Œä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚
3 setState ä¸é€‚åˆç®¡ç†å…¨å±€çš„çŠ¶æ€ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦ç”¨çŠ¶æ€ç®¡ç†ï¼Ÿ
æŠŠã€Œä¸æœåŠ¡å™¨äº¤äº’ã€å’Œã€Œæ“ä½œæ•°æ®ã€çš„é€»è¾‘ï¼Œä»ç»„ä»¶ä¸­æå–å‡ºå»ï¼Œç»„ä»¶åªç”¨æ¥æ”¶å¤„ç†å¥½çš„æ•°æ®å³å¯ã€‚è¿™å°±ç›¸å½“äºåˆ†ç¦»äº†ä¸ª Service å±‚å‡ºå»ï¼Œå¾ˆå¥½çš„å¼€å‘æ¨¡å¼ã€‚</p>
<p>ä»€ä¹ˆæ ·çš„çŠ¶æ€ç®¡ç†</p>
<p>æ¨¡å—ï¼šæ¨èæŒ‰ç…§è·¯ç”±å…¥å£è¿˜åˆ’åˆ†ã€‚
æ¯ä¸ªçŠ¶æ€ç®¡ç†çš„æ¨¡å— - model. ä¸è·¯ç”±å…¥å£ç»„ä»¶ç»‘å®šèµ·æ¥ï¼Œæ¯ä¸ªå…¥å£ç»„ä»¶åŠå…¶å­ç»„ä»¶ï¼Œæ•´ä½“å¯¹åº”ä¸€ä¸ª modelã€‚</p>
<pre><code>---A
    index.jsx
    model.js
---B
    index.jsx
    model.js
---C
    index.jsx
    model.js
</code></pre>
<p>Redux  éå¸¸éš¾ç”¨  redux-thunk  redux-saga ä»€ä¹ˆçš„
Mobx   ç›‘å¬çš„æ–¹å¼å®ç°
dva    Redux çš„å°è£…</p>
<h2 id="mobx-å¯¹æ¯”-hooks">mobx å¯¹æ¯” Hooks</h2>
<h2 id="mobx-react-lite">mobx-react-lite</h2>
<h1 id="state-hook">state hook</h1>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨äº† useState çš„ç»„ä»¶</p>
<pre><code class="language-html">// import {useState}
import React, { useState } from 'react';

function Example() {
  // Declare a new state variable, which we'll call &quot;count&quot;
  // ç”¨åˆ°äº† js çš„ æ•°ç»„è§£æ„ï¼Ÿ
  const [count, setCount] = useState(0);

  return (
    &lt;div&gt;
        &lt;!-- ç›´æ¥ç”¨ {count}  ç›¸å½“äºclass é‡Œçš„ {this.state.count} --&gt;
      &lt;p&gt;You clicked {count} times&lt;/p&gt;

      &lt;!-- ç›¸å½“äºclass é‡Œçš„ {() =&gt; this.setState({ count: this.state.count + 1 })} --&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;
        Click me
      &lt;/button&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p>å¯¹æ¯” class ç±»å‹çš„ç»„ä»¶ï¼Œç›¸å½“äºä»£ç </p>
<pre><code class="language-html">class Example extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      count: 0
    };
  }

  render() {
    return (
      &lt;div&gt;
        &lt;p&gt;You clicked {this.state.count} times&lt;/p&gt;
        &lt;button onClick={() =&gt; this.setState({ count: this.state.count + 1 })}&gt;
          Click me
        &lt;/button&gt;
      &lt;/div&gt;
    );
  }
}
</code></pre>
<p>hooks åªèƒ½åœ¨ function component å†…ä½¿ç”¨ï¼Œ æ— æ³•ç”¨åœ¨ class å†…</p>
<pre><code class="language-js">const Demo = (props)=&gt; {
    // å¯ä»¥
    const [count, setCount] = setState(0);
    return &lt;div /&gt;;
};


function Demo(props) {
    //å¯ä»¥
    const [count, setCount] = setState(0);
    return &lt;div /&gt;
}

class Demo extends React.Component {
    // ä¸å¯ä»¥,å› ä¸ºæ˜¯ class
    const [count, setCount] = setState(0);

    render() {
        return &lt;div /&gt;
    }
}
</code></pre>
<h1 id="effect-hook">effect hook</h1>
<p>æ­£å¦‚ state hook ç±»ä¼¼ class ç±»å‹ç»„ä»¶çš„ this.state å’Œ this.setState().</p>
<p>similar to lifecycle methods in classes, useEffect Hook as componentDidMount, componentDidUpdate, and componentWillUnmount combined.</p>
<p>å½“ Dom å˜åŒ–ç­‰â€œå‰¯ä½œç”¨â€å‘ç”Ÿåï¼Œä¼šè§¦å‘åé¢è¿™äº›åŠ¨ä½œï¼ˆdocument.title = &hellip;ï¼‰</p>
<p>æ”¾åœ¨ function component ä¸­å¯ä»¥ç›´æ¥è®¿é—® state æˆ–è€… props</p>
<pre><code class="language-html">import React, { useState, useEffect } from 'react';

import axios from 'axios';
function App() {
  const [data, setData] = useState({ hits: [] });

  // Similar to componentDidMount and componentDidUpdate:
  useEffect(() =&gt; {
    // Update the document title using the browser API
    document.title = `You clicked ${count} times`;
  });


  return (
    &lt;ul&gt;
      {data.hits.map(item =&gt; (
        &lt;li key={item.objectID}&gt;
          &lt;a href={item.url}&gt;{item.title}&lt;/a&gt;
        &lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
}
export default App;
</code></pre>
<p>ç±»ä¼¼ class çš„</p>
<pre><code class="language-js">.
.
.
constructor(props) {
    super(props);
    this.state = {
      count: 0
    };
  }

  componentDidMount() {
    document.title = `You clicked ${this.state.count} times`;
  }
  componentDidUpdate() {
    document.title = `You clicked ${this.state.count} times`;
  }
.
.
.;
</code></pre>
<h2 id="with-clearup">with clearup</h2>
<p>å¤§éƒ¨åˆ†æ—¶å€™ä¸éœ€è¦æ¸…ç†ï¼Œä½†æ˜¯éƒ¨åˆ†æƒ…å†µéœ€è¦ã€‚ ä¾‹å¦‚è®¢é˜…å¤–éƒ¨æ•°æ®æºï¼Œä½¿ç”¨ effect å¯èƒ½ä¼šå¼•èµ·å†…å­˜æ³„éœ²</p>
<p>åœ¨ä¸€ä¸ª class çš„ç»„ä»¶ä¸­ componentDidMount ä¸­è®¢é˜…ï¼Œ  componentWillUnmount ä¸­æ¸…ç†æ‰</p>
<pre><code class="language-js">class FriendStatus extends React.Component {
  constructor(props) {
    super(props);

    // å¥½å‹æ˜¯å¦ä¸Šçº¿
    this.state = { isOnline: null };

    // å¤„ç†å˜åŒ–
    this.handleStatusChange = this.handleStatusChange.bind(this);
  }


//ç»„ä»¶åŠ è½½å®Œï¼Œè°ƒç”¨ChatAPI.subscribeToFriendStatusï¼Œ åº”è¯¥ä¼šæŠŠæŒç»­è¯·æ±‚å¾—åˆ°çš„å¥½å‹åœ¨çº¿çŠ¶æ€æ•°æ®ï¼Œä¸åœåœ°è¿”å›ç»™ this.handleStatusChange æ¥è®¾ç½® state
  componentDidMount() {
    // è¿™é‡Œè°ƒç”¨ä¸€æ¬¡ document.title
    document.title = `You clicked ${this.state.count} times`;

    ChatAPI.subscribeToFriendStatus(
      this.props.friend.id,
      this.handleStatusChange
    );
  }


  componentDidUpdate() {
    // è¿™é‡Œä¹Ÿè°ƒç”¨äº†ï¼Œ å› ä¸ºæ˜¯ update
    document.title = `You clicked ${this.state.count} times`;
  }

// ç»„ä»¶ umount çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ªæŒç»­çš„è®¢é˜…ç»™å–æ¶ˆæ‰ã€‚
  componentWillUnmount() {
    ChatAPI.unsubscribeFromFriendStatus(
      this.props.friend.id,
      this.handleStatusChange
    );
  }

//ä»è®¢é˜…æ‹¿åˆ°çš„æ•°æ®ï¼Œ(å¥½å‹çŠ¶æ€)ï¼Œæ”¾åˆ°è¿™ä¸ªå‡½æ•°æ¥å¤„ç†  
  handleStatusChange(status) {
    this.setState({
      isOnline: status.isOnline
    });
  }

  render() {
    if (this.state.isOnline === null) {
      return 'Loading...';
    }
    return this.state.isOnline ? 'Online' : 'Offline';
  }
}
</code></pre>
<p>æ¥çœ‹çœ‹ effect hook çš„ç‰ˆæœ¬ï¼Œç®€å•å¤šäº† (å‡ºç°äº†ä¸¤æ¬¡ useEffect())</p>
<pre><code class="language-js">import React, { useState, useEffect } from 'react';

function FriendStatus(props) {

    // å› ä¸º count è¿™ä¸ª state ä¸éœ€è¦clear up, æ‰€ä»¥æ²¡æœ‰ return . (ä¹Ÿå°±æ˜¯è¯´ document.title  = xxx ä»£ç ä¸å‡ºç°åœ¨ componentWillUnmount ç”Ÿå‘½å‘¨æœŸ)
    const [count, setCount] = useState(0);
  useEffect(() =&gt; {
    document.title = `You clicked ${count} times`;
  });


  const [isOnline, setIsOnline] = useState(null);

  useEffect(() =&gt; {
    function handleStatusChange(status) {
      setIsOnline(status.isOnline);
    }
    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);
    
    // Specify how to clean up after this effect: å°±æ˜¯åœ¨ umount é‡Œçš„ä»£ç 
    return function cleanup() {
      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);
    };
  });

  if (isOnline === null) {
    return 'Loading...';
  }
  return isOnline ? 'Online' : 'Offline';
}
</code></pre>
<p>ç”±äº effect æ¯æ¬¡render éƒ½ä¼šè¿è¡Œï¼Œ æ‰€ä»¥ Reactä¼šåœ¨ä¸‹æ¬¡è¿è¡Œ effect ä¹‹å‰æ¸…é™¤ä¹‹å‰æ¸²æŸ“çš„ effectã€‚</p>
<h2 id="è¯¦è§£å‰é¢æåˆ°çš„-æ¯æ¬¡æ¸…ç†-å’Œ-å†…å­˜æ³„éœ²é—®é¢˜-ä»¥åŠä¸ºä»€ä¹ˆæ¯æ¬¡-update-éƒ½ä¼šè¿è¡Œ-effect">è¯¦è§£å‰é¢æåˆ°çš„ æ¯æ¬¡æ¸…ç† å’Œ å†…å­˜æ³„éœ²é—®é¢˜, ä»¥åŠä¸ºä»€ä¹ˆæ¯æ¬¡ update éƒ½ä¼šè¿è¡Œ effect</h2>
<p>é¦–å…ˆä¸Šé¢çš„ä¾‹å­é‡Œ componentDidMountï¼ˆè¿è¡Œä¸€æ¬¡ï¼‰  componentWillUnmountï¼ˆè¿è¡Œä¸€æ¬¡ï¼‰ ä¸­åˆ†åˆ«è®¢é˜…/å–æ¶ˆè®¢é˜…, ä¼ å…¥å‚æ•° props.friend.id</p>
<p>ä»£ç ç•¥</p>
<p>å¦‚æœ  props.friend.id å‘ç”Ÿå˜åŒ–, ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…ï¼Ÿ</p>
<p>ä¾‹å¦‚ä¸€å¼€å§‹æ˜¯  100ï¼Œ ç„¶åå˜æˆäº† 200</p>
<ul>
<li>é¦–å…ˆç»„ä»¶ä¼šä¸€ç›´æ˜¾ç¤º 100 è¿™ä¸ªç”¨æˆ·çš„æ•°æ®</li>
<li>ç„¶å componentWillUnmount ä¼šæŠŠ 200 ä¼ è¿›å»å–æ¶ˆè®¢é˜…ï¼Œå¯¼è‡´ä¹‹å‰çš„ 100 è¿™ä¸ªç”¨æˆ·çš„æ•°æ®ä¸€ç›´æ— æ³•æ³¨é”€ï¼Œäº§ç”Ÿå†…å­˜æ³„éœ²</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ class ç±»å‹ component çš„  componentDidUpdate é‡Œï¼Œè¦æ‰‹åŠ¨å…ˆå–æ¶ˆè®¢é˜…æ—§çš„ friend.id ç„¶åé‡æ–°è®¢é˜…æ–°çš„ friend.id</p>
<p><strong>è¿™å°±æ˜¯æˆ‘ä»¬ç»å¸¸ä¼šåœ¨ React åº”ç”¨ä¸­ï¼Œå› ä¸ºå¿˜è®° componentDidUpdate æ›´æ–°æ•°æ®è€Œäº§ç”Ÿçš„å¸¸è§ bug</strong></p>
<pre><code class="language-js">componentDidUpdate(prevProps) {
    // Unsubscribe from the previous friend.id
    ChatAPI.unsubscribeFromFriendStatus(
      prevProps.friend.id,
      this.handleStatusChange
    );
    // Subscribe to the next friend.id
    ChatAPI.subscribeToFriendStatus(
      this.props.friend.id,
      this.handleStatusChange
    );
}
</code></pre>
<p>è€Œä½¿ç”¨ effect hook,  è¿™ä¸ªæ“ä½œæ˜¯è‡ªåŠ¨çš„ã€‚useEffect ä¼šåœ¨åº”ç”¨ next effect ä¹‹å‰ï¼Œè‡ªåŠ¨æ¸…ç†ä¹‹å‰çš„ effect,</p>
<pre><code class="language-js">// Mount with { friend: { id: 100 } } props
ChatAPI.subscribeToFriendStatus(100, handleStatusChange);     // Run first effect

// Update with { friend: { id: 200 } } props
ChatAPI.unsubscribeFromFriendStatus(100, handleStatusChange); // Clean up previous effect
ChatAPI.subscribeToFriendStatus(200, handleStatusChange);     // Run next effect

// Update with { friend: { id: 300 } } props
ChatAPI.unsubscribeFromFriendStatus(200, handleStatusChange); // Clean up previous effect
ChatAPI.subscribeToFriendStatus(300, handleStatusChange);     // Run next effect

// Unmount
ChatAPI.unsubscribeFromFriendStatus(300, handleStatusChange); // Clean up last effect
</code></pre>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ç¡®ä¿äº†ä¸€è‡´æ€§ï¼Œå¹¶é˜²æ­¢äº†ç”±äºç¼ºå°‘æ›´æ–°é€»è¾‘è€Œåœ¨ç±»ç»„ä»¶ä¸­å¸¸è§çš„bug</p>
<h2 id="å› ä¸º-effect-ä¼šè‡ªåŠ¨-clear-äº§ç”Ÿäº†æ€§èƒ½é—®é¢˜å¦‚ä½•ä¼˜åŒ–">å› ä¸º effect ä¼šè‡ªåŠ¨ clear, äº§ç”Ÿäº†æ€§èƒ½é—®é¢˜ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ</h2>
<p>ä¾‹å¦‚ï¼Œä¸Šé¢çš„è®¡æ•°å™¨çš„ä¾‹å­ï¼Œ å¦‚æœæ¯æ¬¡å¾—åˆ°çš„æ–°çš„ state.count çš„å€¼éƒ½å’Œä¹‹å‰ä¸€è‡´ï¼Œå°±æ²¡æœ‰å¿…è¦é‡æ–° render ç»„ä»¶ï¼</p>
<pre><code class="language-js">componentDidUpdate(prevProps, prevState) {
  if (prevState.count !== this.state.count) {
    document.title = `You clicked ${this.state.count} times`;
  }
}
</code></pre>
<p>effect hook ç‰ˆæœ¬å°±æ˜¯ç»™ useEffect ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºåªæœ‰å½“ count è¢« change çš„æ—¶å€™æ‰ä¼š re-run è¿™ä¸ª effect.</p>
<pre><code class="language-js">useEffect(() =&gt; {
  document.title = `You clicked ${count} times`;
}, [count]); // Only re-run the effect if count changes
</code></pre>
<p>å½“ç„¶ï¼Œå¯¹äºéœ€è¦ clear up çš„åœºæ™¯åŒæ ·æœ‰æ•ˆ</p>
<pre><code class="language-js">useEffect(() =&gt; {
  function handleStatusChange(status) {
    setIsOnline(status.isOnline);
  }

  ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);
  return () =&gt; {
    ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);
  };
}, [props.friend.id]); // Only re-subscribe if props.friend.id changes
</code></pre>
<h1 id="rules">rules</h1>
<p>ä»…ä»…åœ¨ top level è°ƒç”¨ hook, Donâ€™t call Hooks inside loops, conditions, or nested functions.</p>
<p>åªåœ¨ function component/custom hooks ä¸Šè°ƒç”¨ hooksï¼ˆè¿™ä¸ªå‰é¢æåˆ°äº†ï¼‰</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œè§£é‡Šä¸ºä½•ä¸èƒ½åœ¨ if  loop ç­‰é‡Œé¢ä½¿ç”¨ hook</p>
<pre><code class="language-js">function Form() {
  // 1. Use the name state variable
  const [name, setName] = useState('Mary');

  // 2. Use an effect for persisting the form
  useEffect(function persistForm() {
    localStorage.setItem('formData', name);
  });

  // 3. Use the surname state variable
  const [surname, setSurname] = useState('Poppins');

  // 4. Use an effect for updating the title
  useEffect(function updateTitle() {
    document.title = name + ' ' + surname;
  });

  // ...
}
</code></pre>
<p>å‘ç°äº†ä¸¤ä¸ª useState() ï¼Œè¡¨ç¤ºè°ƒç”¨ä¸¤æ¬¡ hook , é‚£ React æ€ä¹ˆçŸ¥é“å“ªä¸ª state å¯¹åº”å“ªä¸ª useState() ?<br>
ç­”æ¡ˆå°±æ˜¯æ ¹æ® è°ƒç”¨çš„é¡ºåº</p>
<pre><code class="language-jsx">// ------------
// First render
// ------------
useState('Mary')           // 1. Initialize the **name** state variable with 'Mary'
useEffect(persistForm)     // 2. Add an effect for persisting the form
useState('Poppins')        // 3. Initialize the **surname** state variable with 'Poppins'
useEffect(updateTitle)     // 4. Add an effect for updating the title

// -------------
// Second render
// -------------
useState('Mary')           // 1. **Read** the name state variable (argument is ignored)
useEffect(persistForm)     // 2. Replace the effect for persisting the form (æ¯æ¬¡éƒ½ä¼š replace, å› ä¸ºæ²¡æœ‰ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°)
useState('Poppins')        // 3. Read the surname state variable (argument is ignored)
useEffect(updateTitle)     // 4. Replace the effect for updating the title

// ...
</code></pre>
<p>åªè¦é’©å­è°ƒç”¨çš„é¡ºåºåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´æ˜¯ç›¸åŒçš„ï¼ŒReactå°±å¯ä»¥å°†ä¸€äº›æœ¬åœ°çŠ¶æ€ä¸å®ƒä»¬æ¯ä¸ªå…³è”èµ·æ¥ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ªé’©å­è°ƒç”¨(ä¾‹å¦‚ï¼ŒpersistFormæ•ˆæœ)æ”¾åœ¨ä¸€ä¸ªæ¡ä»¶ä¸­ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢?</p>
<pre><code class="language-js">// ğŸ”´ We're breaking the first rule by using a Hook in a condition
  if (name !== '') {
    useEffect(function persistForm() {
      localStorage.setItem('formData', name);
    });
  }
</code></pre>
<p>å½“ç¬¬ä¸€æ¬¡ render çš„æ—¶å€™ï¼Œ <code>useEffect(persistForm)</code> è¿™ä¸ª hook ä¼šè¢«è¿è¡Œã€‚(name !=== '&rsquo;  ç­‰äº true)</p>
<p>ä½†æ˜¯ç¬¬äºŒæ¬¡ render çš„æ—¶å€™ï¼Œå¦‚æœç”¨æˆ·æ¸…ç©ºäº† form !  å¯¼è‡´ name å˜æˆç©ºå€¼ã€‚  è¿™æ¬¡æ¸²æŸ“å°±ä¼šè·³è¿‡è¿™ä¸ª hook, é¡ºåºå°±å˜äº†</p>
<pre><code class="language-html">useState('Mary')           // 1. Read the name state variable (argument is ignored)
// useEffect(persistForm)  // ğŸ”´ This Hook was skipped!
useState('Poppins')        // ğŸ”´ 2 (but was 3). Fail to read the surname state variable
useEffect(updateTitle)     // ğŸ”´ 3 (but was 4). Fail to replace the effect
</code></pre>
<p>å¦‚æœä¸€å®šè¦æœ‰æ¡ä»¶åœ°è¿è¡Œ effect, å¿…é¡»æ”¾åˆ° hook é‡Œé¢.  ä¿è¯å®šä¹‰å’Œè¿è¡Œhook çš„é¡ºåºä¸€è‡´</p>
<pre><code class="language-js">useEffect(function persistForm() {
    // ğŸ‘ We're not breaking the first rule anymore
    if (name !== '') {
      localStorage.setItem('formData', name);
    }
  });
</code></pre>
<h2 id="eslint-plugin">eslint plugin</h2>
<pre><code class="language-shell">npm install eslint-plugin-react-hooks --save-dev

</code></pre>
<pre><code class="language-js">// Your ESLint configuration
{
  &quot;plugins&quot;: [
    // ...
    &quot;react-hooks&quot;
  ],
  &quot;rules&quot;: {
    // ...
    &quot;react-hooks/rules-of-hooks&quot;: &quot;error&quot;, // Checks rules of Hooks
    &quot;react-hooks/exhaustive-deps&quot;: &quot;warn&quot; // Checks effect dependencies
  }
}
</code></pre>
<h1 id="ç»“åˆ-axios">ç»“åˆ axios</h1>
<p><a href="https://www.robinwieruch.de/react-hooks-fetch-data">https://www.robinwieruch.de/react-hooks-fetch-data</a></p>
<p>æœªçœ‹å®Œ</p>
<p>å…ˆå®šä¹‰ effect hook</p>
<pre><code class="language-js">useEffect(()=&gt;{

    // ä¸å¯ä»¥ç›´æ¥ useEffect(async () =&gt; { }, å› ä¸ºä¼šè¿”å›ä¸€ä¸ª promise å¯¹è±¡ è€Œ effect hook åº”è¯¥ä»€ä¹ˆä¹Ÿä¸è¿”å›ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ª clear up å‡½æ•°

    // è€Œåº”è¯¥å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°
    const fetchData = async () =&gt; {
      const result = await axios(
        'https://hn.algolia.com/api/v1/search?query=redux',
      );
      setData(result.data);
    };

    // ç„¶åè°ƒç”¨
    fetchData();
}, []);
</code></pre>
<p>å¦‚ä½•è§¦å‘/è°ƒç”¨</p>
<h1 id="hooks-å…¨å±€çŠ¶æ€ç®¡ç†">hooks å…¨å±€çŠ¶æ€ç®¡ç†</h1>
<p>ä½¿ç”¨ use-global-hook åŒ…</p>
<p><a href="https://juejin.im/post/5d783fca6fb9a06af50ff577">https://juejin.im/post/5d783fca6fb9a06af50ff577</a></p>
<h2 id="æœ€å°æ¡ˆä¾‹">æœ€å°æ¡ˆä¾‹</h2>
<pre><code class="language-js">import React from 'react';

//1 å¯¼å…¥
import globalHook from 'use-global-hook';

//2 åˆå§‹åŒ– state
const initialState = {
  counter: 0,
};

// 3 actions. æ³¨æ„ store.state å°±æ˜¯â€œå…¨å±€â€çš„ state
const actions = {
  // æ–¹æ³•ä¼ å…¥ store å’Œ çœŸæ­£çš„å‚æ•°
  addToCounter: (store, amount) =&gt; {
    const newCounterValue = store.state.counter + amount;
    // ä¿®æ”¹åé‡æ–°ä¿å­˜å›æ¥
    store.setState({ counter: newCounterValue });
  },
};

// 4 å®šä¹‰ useGlobalï¼Œè°ƒç”¨ globalHook, ä¼ å…¥ initialState å’Œ actions
const useGlobal = globalHook(React, initialState, actions);

const App = () =&gt; {

  // è°ƒç”¨ useGlobal() å¾—åˆ° globalState å’Œ globalActions
  const [globalState, globalActions] = useGlobal();

  return (
    &lt;div&gt;
      &lt;p&gt;
        counter:
        // globalState è¯»å– state
        {globalState.counter}
      &lt;/p&gt;

      // globalActions è°ƒç”¨ action
      &lt;button type=&quot;button&quot; onClick={() =&gt; globalActions.addToCounter(1)}&gt;
        +1 to global
      &lt;/button&gt;
    &lt;/div&gt;
  );
};

export default App;
</code></pre>
<h2 id="ä½¿ç”¨å…¨å±€çŠ¶æ€ä¹‹å‰æ˜ å°„å®ƒçš„ä¸€ä¸ªå­é›†åªæœ‰æ›´æ–°äº†å­é›†ç»„ä»¶æ‰ä¼šé‡æ–°å‘ˆç°">ä½¿ç”¨å…¨å±€çŠ¶æ€ä¹‹å‰æ˜ å°„å®ƒçš„ä¸€ä¸ªå­é›†ã€‚åªæœ‰æ›´æ–°äº†å­é›†ï¼Œç»„ä»¶æ‰ä¼šé‡æ–°å‘ˆç°ã€‚</h2>
<p>åœ¨ components/CounterA.js ä¸­ï¼Œåªè¯»å–/è®¾ç½®å…¨å±€ state çš„ä¸€éƒ¨åˆ†ã€‚  ç‚¹ button ï¼Œç»™ A +1
å¤åˆ¶1000ä¸ª CounterB åï¼Œä»»æ„ä¸€ä¸ª B ä¸Šç‚¹æŒ‰é’®ï¼Œ å…¨éƒ¨ B éƒ½ +1ï¼ˆä»–ä»¬éƒ½ç”¨çš„å…¨å±€stateé‡Œçš„ counterB ï¼‰</p>
<p>index.js</p>
<pre><code class="language-jsx">import React, { useState } from &quot;react&quot;;
import ReactDOM from &quot;react-dom&quot;;

import &quot;./styles.css&quot;;
import { renderTime } from &quot;./utils&quot;;
import CounterA from &quot;./components/CounterA&quot;;
import CounterB from &quot;./components/CounterB&quot;;

function App() {

  const [children, setChilds] = useState([]);

  const addCounterA = () =&gt; {
    const counter = &lt;CounterA /&gt;;
    const newChildren = [...children, counter];
    setChilds(newChildren);
  };

  const addCounterB = () =&gt; {
    const counter = &lt;CounterB /&gt;;
    const newChildren = [...children, counter];
    setChilds(newChildren);
  };

  const addManyCounterB = count =&gt; {
    const newChildren = [...children];
    for (let index = 0; index &lt; count; index++) {
      newChildren.push(&lt;CounterB /&gt;);
    }
    setChilds(newChildren);
  };
  return (
    &lt;div className=&quot;App&quot;&gt;
      &lt;h1&gt;I am the parent component&lt;/h1&gt;
      &lt;h3&gt;{renderTime()}&lt;/h3&gt;
      &lt;button onClick={addCounterA}&gt;Add CounterA component&lt;/button&gt;
      &lt;button onClick={addCounterB}&gt;Add CounterB component&lt;/button&gt;
      &lt;button onClick={() =&gt; addManyCounterB(10000)}&gt;
        Add 10 000 CounterB components
      &lt;/button&gt;
      &lt;div className=&quot;container&quot;&gt;{children}&lt;/div&gt;
    &lt;/div&gt;
  );
}

const rootElement = document.getElementById(&quot;root&quot;);
ReactDOM.render(&lt;App /&gt;, rootElement);
</code></pre>
<p>æ‹†åˆ† store/actions, åœ¨</p>
<p>store/index.js  å†…å®¹</p>
<pre><code class="language-js">import React from 'react';
import globalHook from 'use-global-hook';
//æ¥è‡ª actions
import * as actions from &quot;../actions&quot;;


// global initial state &amp; acitons
const initialState = {
  counter: 0,
  tree: []
};



const useGlobal = globalHook(React, initialState, actions);


export default useGlobal;
</code></pre>
<p>actions/index.js</p>
<pre><code class="language-js">export const addToCounterA = (store, amount) =&gt; {
  const counterA = store.state.counterA + amount;
  store.setState({ counterA });
};

export const addToCounterB = (store, amount) =&gt; {
  const counterB = store.state.counterB + amount;
  store.setState({ counterB });
};


//const actions = {
//  addToCounter: (store, amount) =&gt; {
//    const newCounterValue = store.state.counter + amount;
//    store.setState({ counter: newCounterValue });
//  },
//  initTreeData: (store, data) =&gt; {
//    store.setState({ tree: data });
//  }
//};
</code></pre>
<p>components/CounterA.js</p>
<pre><code class="language-jsx">import React from &quot;react&quot;;

import useGlobal from &quot;../store&quot;;
import { renderTime } from &quot;../utils&quot;;

const CounterA = () =&gt; {
  //useGlobal() åªè¯»å–éœ€è¦çš„ state è€Œä¸æ˜¯å…¨éƒ¨
  const [counterA, addToCounterA] = useGlobal(
    state =&gt; state.counterA,
    actions =&gt; actions.addToCounterA
  );
  return (
    &lt;div className=&quot;Counter&quot;&gt;
      &lt;h3&gt;Counter A&lt;/h3&gt;
      &lt;p&gt;
        Value:
        {counterA}
      &lt;/p&gt;
      &lt;button type=&quot;button&quot; onClick={() =&gt; addToCounterA(1)}&gt;
        +1 to global
      &lt;/button&gt;
      &lt;p&gt;{renderTime()}&lt;/p&gt;
    &lt;/div&gt;
  );
};

export default CounterA;
</code></pre>
<h2 id="ä½¿ç”¨-hoc-è¿æ¥åˆ°-class">ä½¿ç”¨ HOC è¿æ¥åˆ° class</h2>
<pre><code class="language-javascript">import React, { useState } from &quot;react&quot;;
import ReactDOM from &quot;react-dom&quot;;

import &quot;./styles.css&quot;;
import { renderTime } from &quot;./utils&quot;;
import Counter from &quot;./components/Counter&quot;;

function App() {
  const [children, setChilds] = useState([]);
  const addCounter = () =&gt; {
    const counter = &lt;Counter /&gt;;
    const newChildren = [...children, counter];
    setChilds(newChildren);
  };
  return (
    &lt;div className=&quot;App&quot;&gt;
      &lt;h1&gt;I am the parent component&lt;/h1&gt;
      &lt;h3&gt;{renderTime()}&lt;/h3&gt;
      &lt;button onClick={addCounter}&gt;Add Counter component&lt;/button&gt;
      &lt;div className=&quot;container&quot;&gt;{children}&lt;/div&gt;
    &lt;/div&gt;
  );
}

const rootElement = document.getElementById(&quot;root&quot;);
ReactDOM.render(&lt;App /&gt;, rootElement);

</code></pre>

    </div>
    <div class="article-footer">
<blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    <li class="post-copyright-link hidden-xs">
      <strong>æœ¬æ–‡é“¾æ¥: </strong>
      <a href="https://my101du.github.io/1/01/react-hooks/" title="" target="_blank" rel="external">https://my101du.github.io/1/01/react-hooks/</a>
    </li>
    <li class="post-copyright-license">
      <strong>Licenseï¼š</strong><a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN</a>
    </li>
  </ul>
</blockquote>

<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/my101du" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="https://avatars2.githubusercontent.com/u/1332645?s=460&amp;u=dc114d6baad010456a5af87c4cc2df0694ff2b1c&amp;v=4" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/my101du" target="_blank"><span class="text-dark">my101du</span><small class="ml-1x"></small></a></h3>
        <div>Stay Hungry, Stay Foolish</div>
      </div>
    </figure>
  </div>
</div>
    </div>
  </article>
<section id="comments">
</section>

</div><nav class="bar bar-footer clearfix" data-stick-bottom>
    <div class="bar-inner">
        <ul class="pager pull-left">
            <li class="prev">
                <a href="https://my101du.github.io/1/01/react-router4/" title=""><i
                        class="icon icon-angle-left"
                        aria-hidden="true"></i><span>&nbsp;&nbsp;ä¸‹ä¸€ç¯‡</span></a>
            </li>
            <li class="next">
                <a href="https://my101du.github.io/1/01/mobx/"
                    title=""><span>ä¸Šä¸€ç¯‡&nbsp;&nbsp;</span><i
                        class="icon icon-angle-right" aria-hidden="true"></i></a>
            </li>
            
            <li class="toggle-toc">
                <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false"
                    title="æ–‡ç« ç›®å½•" role="button">
                    <span>[&nbsp;</span><span>æ–‡ç« ç›®å½•</span>
                    <i class="text-collapsed icon icon-anchor"></i>
                    <i class="text-in icon icon-close"></i>
                    <span>]</span>
                </a>
            </li>
        </ul>
        <div class="bar-right">
            <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter"
                data-mobile-sites="weibo,qq,qzone"></div>
        </div>
    </div>
</nav>

</main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
<ul class="social-links">
    <li><a href="https://github.com/my101du" target="_blank" title="github" data-toggle=tooltip data-placement=top >
            <i class="icon icon-github"></i></a></li>
    <li><a href="https://my101du.github.io/index.xml" target="_blank" title="rss" data-toggle=tooltip data-placement=top >
            <i class="icon icon-rss"></i></a></li>
</ul>
  <div class="copyright">
    &copy;2017  -
    2020
    <div class="publishby">
        Theme by <a href="https://github.com/xiaoheiAh" target="_blank"> xiaoheiAh </a>base on<a href="https://github.com/xiaoheiAh/hugo-theme-pure" target="_blank"> pure</a>.
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/javascript.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/php.min.js" defer></script><script>
    hljs.configure({
        tabReplace: '    ', 
        classPrefix: ''     
        
    })
    hljs.initHighlightingOnLoad();
</script>
<script src="https://my101du.github.io/js/application.min.bdeb64b910570b6c41badc6a05b7afb0c8ad9efd8525de3c7257d59e786326a3.js"></script>
<script src="https://my101du.github.io/js/plugin.min.51ff8c7317566f82259170fa36e09c4493adc9b9378b427a01ad3f017ebac7dd.js"></script>

<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'æ–‡ç« ',
                PAGES: 'é¡µé¢',
                CATEGORIES: 'åˆ†ç±»',
                TAGS: 'æ ‡ç­¾',
                UNTITLED: '(æœªå‘½å)',
            },
            ROOT_URL: 'https:\/\/my101du.github.io\/',
            CONTENT_URL: 'https:\/\/my101du.github.io\/\/searchindex.json ',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script type="text/javascript" src="https://my101du.github.io/js/insight.min.a343cd9a5a7698336b28ef3a7c16a3a1b1d2d5fb17dc8ed04022bbe08cc5459073a15bdafa3a8a58cdd56080784bdd69fa70b1ae8597565c799c57ed00f0e120.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3',
        
        hasInnerContainers: true,
    });
</script>


  </body>
</html>
