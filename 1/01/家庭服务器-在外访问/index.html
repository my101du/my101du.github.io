<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>
         - my101du Blog
      </title>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    
    <meta name="theme-color" content="#000000" />
    
    <meta http-equiv="window-target" content="_top" />
    
    
    <meta name="description" content="局域网穿透 资料： https://sspai.com/post/52523 其实就是 群晖控制面板启用 ssh 登录 ssh 后， 下载 frp 并配置客户端 frpc.ini [common] server_addr = ip server_port = 7000 auth_token = 和服务器端对应 pool_count = 1 [ssh] type = tcp local_ip = NAS 局域网ip local_port =" />
    <meta name="generator" content="Hugo 0.70.0 with theme pure" />
    <title> - my101du Blog</title>
    
    
    <link rel="stylesheet" href="https://my101du.github.io/css/style.min.7dc20efbc53647d41aa9ddea0c48e59300223d084e66ea0cbe7c30bd88903acc.css">
    
    <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css" async>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css" async>
    <meta property="og:title" content="" />
<meta property="og:description" content="局域网穿透 资料： https://sspai.com/post/52523 其实就是 群晖控制面板启用 ssh 登录 ssh 后， 下载 frp 并配置客户端 frpc.ini [common] server_addr = ip server_port = 7000 auth_token = 和服务器端对应 pool_count = 1 [ssh] type = tcp local_ip = NAS 局域网ip local_port =" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://my101du.github.io/1/01/%E5%AE%B6%E5%BA%AD%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%9C%A8%E5%A4%96%E8%AE%BF%E9%97%AE/" />

<meta itemprop="name" content="">
<meta itemprop="description" content="局域网穿透 资料： https://sspai.com/post/52523 其实就是 群晖控制面板启用 ssh 登录 ssh 后， 下载 frp 并配置客户端 frpc.ini [common] server_addr = ip server_port = 7000 auth_token = 和服务器端对应 pool_count = 1 [ssh] type = tcp local_ip = NAS 局域网ip local_port =">

<meta itemprop="wordCount" content="7932">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="局域网穿透 资料： https://sspai.com/post/52523 其实就是 群晖控制面板启用 ssh 登录 ssh 后， 下载 frp 并配置客户端 frpc.ini [common] server_addr = ip server_port = 7000 auth_token = 和服务器端对应 pool_count = 1 [ssh] type = tcp local_ip = NAS 局域网ip local_port ="/>

    <!--[if lte IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
      <![endif]-->

    <!--[if lt IE 9]>
        <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
      <![endif]-->
  </head>

  
  

  <body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader">
    <div class="slimContent">
      <div class="navbar-header">
        <div class="profile-block text-center">
          <a id="avatar" href="https://github.com/my101du" target="_blank">
            <img class="img-circle img-rotate" src="https://avatars2.githubusercontent.com/u/1332645?s=460&amp;u=dc114d6baad010456a5af87c4cc2df0694ff2b1c&amp;v=4" width="200" height="200">
          </a>
          <h2 id="name" class="hidden-xs hidden-sm">my101du</h2>
          <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
          <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>Dongguan, China</small>
        </div><div class="search" id="search-form-wrap">
    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i
                        class="icon icon-search"></i></button>
            </span>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="想要查找什么..."
                        x-webkit-speech />
                    <button type="button" class="close ins-close ins-selectable" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">×</span></button>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
    </form>
</div>
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
        <ul class="nav navbar-nav main-nav">
            <li class="menu-item menu-item-home">
                <a href="/">
                    <i class="icon icon-home-fill"></i>
                  <span class="menu-title">Home</span>
                </a>
            </li>
            <li class="menu-item menu-item-archives">
                <a href="/posts/">
                    <i class="icon icon-archives-fill"></i>
                  <span class="menu-title">Archives</span>
                </a>
            </li>
            <li class="menu-item menu-item-categories">
                <a href="/categories/">
                    <i class="icon icon-folder"></i>
                  <span class="menu-title">Categories</span>
                </a>
            </li>
            <li class="menu-item menu-item-tags">
                <a href="/tags/">
                    <i class="icon icon-tags"></i>
                  <span class="menu-title">Tags</span>
                </a>
            </li>
            <li class="menu-item menu-item-about">
                <a href="/about/">
                    <i class="icon icon-cup-fill"></i>
                  <span class="menu-title">About</span>
                </a>
            </li>
        </ul>
      </nav>
    </div>
  </header>

<aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content"><p>enjoy~</p>
            </div>
        </div>
    </div>
</div>

      <div class="widget">
    <h3 class="widget-title"> 分类</h3>
    <div class="widget-body">
        <ul class="category-list">
        </ul>
    </div>
</div>
      <div class="widget">
    <h3 class="widget-title"> 标签</h3>
    <div class="widget-body">
        <ul class="tag-list">
            
        </ul>

    </div>
</div>
      
<div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
        <ul class="recent-post-list list-unstyled no-thumbnail">
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://my101du.github.io/1/01/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="title"></a>
                    </p>
                    <p class="item-date">
                        <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://my101du.github.io/1/01/bootstrap-%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E4%B8%8E%E6%8A%80%E5%B7%A7/" class="title"></a>
                    </p>
                    <p class="item-date">
                        <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://my101du.github.io/1/01/bootstrap4/" class="title"></a>
                    </p>
                    <p class="item-date">
                        <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://my101du.github.io/1/01/css-%E5%8A%A8%E7%94%BB/" class="title"></a>
                    </p>
                    <p class="item-date">
                        <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://my101du.github.io/1/01/css-%E5%8A%A8%E7%94%BB%E5%BA%93-animate.css/" class="title"></a>
                    </p>
                    <p class="item-date">
                        <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
                    </p>
                </div>
            </li>
        </ul>
    </div>
</div>
  </div>
</aside>

    
    
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <h4 class="toc-title">文章目录</h4>
    <nav id="toc" class="js-toc toc">

    </nav>
  </div>
</aside>
<main class="main" role="main"><div class="content">
  <article id="-" class="article article-type-" itemscope
    itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      <h1 itemprop="name">
  <a
    class="article-title"
    href="/1/01/%E5%AE%B6%E5%BA%AD%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%9C%A8%E5%A4%96%E8%AE%BF%E9%97%AE/"
    ></a
  >
</h1>

      <div class="article-meta">
        

        <span class="post-comment"><i class="icon icon-comment"></i>&nbsp;<a href="/1/01/%E5%AE%B6%E5%BA%AD%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%9C%A8%E5%A4%96%E8%AE%BF%E9%97%AE/#comments"
            class="article-comment-link">评论</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 7932字</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 16分 </span>
      </div>
    </div>
    <div class="article-entry marked-body js-toc-content" itemprop="articleBody">
      <h1 id="局域网穿透">局域网穿透</h1>
<p>资料：</p>
<p><a href="https://sspai.com/post/52523">https://sspai.com/post/52523</a></p>
<p>其实就是</p>
<ol>
<li>
<p>群晖控制面板启用 ssh</p>
</li>
<li>
<p>登录 ssh 后， 下载 frp 并配置客户端 frpc.ini</p>
</li>
</ol>
<pre><code class="language-config">[common]
server_addr = ip
server_port = 7000
auth_token = 和服务器端对应
pool_count = 1

[ssh]
type = tcp
local_ip = NAS 局域网ip
local_port = 22
remote_port = 6000

[nas]
type = http
local_port = 5000
subdomain = nas

[web]
type = http
local_port = 80
subdomain = web
</code></pre>
<p>web station 如果没有可以不填 web</p>
<h2 id="公网ip--光猫桥接">公网ip ， 光猫桥接</h2>
<p>百度搜索IP，百度会显示你当前的IP地址，</p>
<p>你把这个IP地址和你路由器的IP地址作比较，如果一致，说明你是公网IP，如果不一致，说明你是运营商用一个IP然后经过多层NAT之后分配给你的内网IP
例如我联通的光猫登录后就是 10.216.21.183  不用想了后面 ddns 什么的都不适用你， 用穿透方案</p>
<p>一般在光猫的背后可以看到信息
如果你的光猫是带拨号功能的 (pppoe模式)，那么请改成桥接模式，让路由器来拨号，否则你即便有公网IP，还是要做内网穿透，</p>
<h2 id="hyper-v-网络模式解析">Hyper-V 网络模式解析</h2>
<p>外部网络的简单来讲就是可以上外网，和宿主机的网络一样，此外和其他虚拟机和可以互相通信。内部网络则只能在虚拟机之间或者虚拟机和宿主机之间进行网络通信，不能上外网。专用网络就相当于虚拟机之间构建的一个局域网，连宿主机都无法进行网络连接。</p>
<h3 id="外部网络bridge-桥接-由路由器分配ip-和宿主机在一个网段-通过路由器访问互联网">外部网络(Bridge 桥接) 由路由器分配IP 和宿主机在一个网段， 通过路由器访问互联网</h3>
<p>但是 HUAWEI/荣耀路由  在做端口转发的时候， <strong>找不到设备！！！</strong> (宿主机用无线网卡)
听说其他 TP-LINK 的能找到</p>
<p>好像还有个选项“允许xxxx 控制xxxx&rdquo; 最关键是连接类型千万要选外部网络，然后勾选允许管理操作系统共享此网络适配器，</p>
<p>(最终： 是 windows 系统的问题， 装的 win server 2016 可能是修改版。。  某个服务被关掉了。)</p>
<p>换成win 10</p>
<p>下载的 win10 的 LTSC 企业版有问题：找不到网络邻居里的计算机 NAS&hellip;</p>
<p>安装 专业版 就好了。</p>
<h3 id="内部网络nat--和宿主机不在一个网段可以和宿主机通信也能通过设置宿主机设置的-网络共享-访问互联网">内部网络(NAT)  和宿主机不在一个网段，可以和宿主机通信，也能通过设置宿主机设置的 &ldquo;网络共享&rdquo; 访问互联网</h3>
<p>前面 桥接 方式很简单，很便利，但是也有其不完美的地方，比如物理机所在的外部环境的网络发生变化的时候，虚拟机的IP地址也会相应的发生变化，这对于需要虚拟机有固定IP地址的需求来说不是一个好的事情，譬如假设我们把虚拟机作为服务器的话，IP经常变动简直要命！解决办法就是NAT</p>
<p>需要开启网络共享和网络发现，针对windows虚拟机如果不行必要的时候还需要安装Integration Service
用CDROM挂载vmguest.iso, 在虚拟机里面打开该盘并找到setup.exe进行安装，附上vmguest.iso下载链接：http://pan.baidu.com/s/1hrDvxlU密码：zxk4</p>
<p>添加内部网络后，来到“网络和共享中心” 找到那块虚拟网卡，切到“共享” 勾上 xxxx</p>
<p>新建一个内部虚拟交换机，然后将物理机的网络共享给虚拟交换机，最后将虚拟机的网络适配器设置为这个虚拟交换机就达到了NAT的目的</p>
<p>在关闭Hyper-V虚拟机的情况下，选择Hyper-V管理界面中的“虚拟交换机管理器”
在弹出的对话框中“新建虚拟网络交换机”，选择“内部”，点击“创建虚拟交换机”。
在IP网卡 切换到“共享”标签下，勾选“允许其他网络用户通过此计算机的Internet连接来连接”并在下方“家庭网络连接”中选择刚刚创建的虚拟交换机——vEthernet (Hyper-V Switch)，点击“确认</p>
<p>为了让局域网或外网用户直接远程访问或访问虚拟机里的服务，可以将实机端口直接映射到Hyper-V的虚拟机里面，省去很多麻烦。</p>
<p>此时物理机和虚拟机是在两个不同的网络中的，虚拟机通过windows的网络共享功能上网，他和物理机之间可以相互访问，但是物理机所在的网络中的其他主机如果没有做别的设置是相互访问不到的。这种方式虚拟机自带网络，网络环境比较稳定，不容易出现IP变动，如果需要IP固定的话可以直接给虚拟机设置IP地址，这个交换机的网络地址可以通过cmd下的ipconfig看到，这个值其实就是可以看做网关。</p>
<h2 id="下面是hyper-v共享ip端口映射一些常用命令">下面是hyper-v共享IP端口映射一些常用命令</h2>
<p>在 PowerShell 里打开</p>
<p>共享IP端口映射一些常用命令
一、查询端口映射情况
netsh interface portproxy show v4tov4
查询这个IP所有的端口映射。
netsh interface portproxy show v4tov4|find &ldquo;192.168.1.1&rdquo;
二、增加一个端口映射
netsh interface portproxy add v4tov4 listenport=外网端口 listenaddress=主IP connectaddress=私网IP connectport=私网IP端口
例如：
netsh interface portproxy add v4tov4 listenport=8888 listenaddress=118.123.13.180 connectaddress=192.168.1.10 connectport=2222
三、删除一个端口映射
netsh interface portproxy delete v4tov4 listenaddress=主IP listenport=外网端口</p>
<h3 id="host-only-无法访问互联网-只能和宿主机通信">Host-Only 无法访问互联网 只能和宿主机通信</h3>
<h2 id="不要用群晖官方的-quickconnect">不要用群晖官方的 QuickConnect.</h2>
<p>打通家里和单位局域网的链接，</p>
<ol>
<li>黑裙不能用官方那个 connect</li>
<li>如果你的宽带有公网IP 可以搞个DDNS动态域名花生壳之类的。路由器防火墙做一下端口映射，就可以直接访问。外网访问速度，取决于你的上传带宽。</li>
<li>没有公网IP的宽带 就需要 内网穿透 了(第三方服务器来转发数据)</li>
</ol>
<p>可用通过 frp、蒲公英的设备、其他方式(ngrok 不考虑了，收费很高, frp 开源)</p>
<p>我选 frp + 买一台便宜的服务器(FQ，web 穿透多用途  如搬瓦工的， 国内1M水管不是很好。。)</p>
<h2 id="如果有固定的公网ip最简单路由器做一个端口转发即可">如果有固定的公网IP，最简单，路由器做一个端口转发即可</h2>
<p>最简单</p>
<h2 id="有动态公网-ip--用-ddns--自己的域名">有动态公网 IP  用 DDNS + 自己的域名</h2>
<p>如果有NAS分享Synology Drive内文件至公网需求的话，只能使用自己域名绑定NAS才行了（不然是DDNS服务商那丑丑的域名=。=</p>
<p>目前网上大部分的教程都是通过python或php运行环境运行阿里云DDNS客户端更新IP，操作起来很麻烦。群晖支持DNSPod.cn的DDNS服务（虽然DNSPod没宣传），只是设置方法有些不同。DNSPod是国内老牌DNS解析服务商，现在已经属于腾讯云，具有解析稳定、更新快的特点，个人是其老用户所以更倾向于使用DNSPod的DDNS服务。</p>
<p>依照DNSPod中提示，前往域名注册的地方将DNS修改为DNSPod的DNS服务器。</p>
<p>添加一个自己想要的二级域名，记录类型A，记录值随便填写一个IP即可。</p>
<p>用户中心→安全设置→API Token项目中点击“激活”或“查看”。 (改版后移动到 账号中心-&gt;密钥管理-&gt;  添加)</p>
<p>记录保存好ID和Token，仅创建时显示一遍，没记录就只能删除重新创建了。</p>
<p>在群晖DSM中点击控制面板→外部访问→DDNS→“新增”按钮，
主机名称：填写刚刚添加的域名解析记录IP， 对应的 <strong>域名</strong>  如 nas.test.org
用户名/电子邮箱：填写API ID
密码/密钥：填写API TOKEN，然后保存</p>
<p>点击一下立即更新，显示正常后表示DDNS已成功生效。</p>
<p>如果”主机名不存在“。</p>
<p>路由器上添加端口转发。 (外部 5000 -&gt; 内部:nas 5000)</p>
<p>由于这里是 hyper-v 里的虚拟机 nas.  而且只有一个”外部网络“的虚拟交换机。 在路由器的 NAT 设置里里是找不到这个设备的。</p>
<p>因此需要： google 下&hellip; hyper-v 端口映射。。</p>
<p>最后：记得域名要加上NAS的端口号一起访问。例如：cloud.tenlonstudio.com:5000</p>
<p>路由器设置： (如果你的路由器能被 NAS 支持。可以直接快速设置， 否则就只能登陆路由器设置端口转发了)</p>
<p>检查路由器信息：检查网络环境失败。</p>
<p><a href="http://www.synology.com/tutorials/how_to_internet.php?#t3.10">http://www.synology.com/tutorials/how_to_internet.php?#t3.10</a></p>
<h2 id="配置-frp">配置 frp</h2>
<p>完整说明：https://github.com/fatedier/frp/blob/master/README_zh.md</p>
<p>登录 vps, 输入 arch 命令下载合适的版本</p>
<p><a href="https://github.com/fatedier/frp/releases">https://github.com/fatedier/frp/releases</a></p>
<p>wget xxxx</p>
<p>解压改名</p>
<p>tar -zxvf frp_0.22.0_linux_amd64.tar.gz
cp -r frp_0.22.0_linux_amd64 frp</p>
<p>服务器端
frps
frps.ini</p>
<p>客户端
frpc
frpc.ini</p>
<h3 id="服务器端">服务器端</h3>
<p>修改服务器端配置文件：vim frps.ini</p>
<pre><code class="language-config">[common]
bind_port = 7000
dashboard_port = 7500
token = 12345678
dashboard_user = admin
dashboard_pwd = admin
vhost_http_port = 10080  # 用于处理 frpc 客户端里的 web
vhost_https_port = 10443
</code></pre>
<p>运行</p>
<pre><code class="language-shell">./frps -c frps.ini

# Ctrl+C停止或者关闭SSH窗口后，frps均会停止运行，因而我们使用 nohup命令将其运行在后台。
nohup ./frps -c frps.ini &amp;

#nohup: ignoring input and appending output to 'nohup.out'

# Ctrl+C关闭nohup, 使用jobs命令查看后台运行的程序
jobs

# 看到frps正在后台正常运行
[1]+  Running                 nohup ./frps -c frps.ini &amp;

# 关闭后重新启动, 这是 job id ,而不是process id
kill %1
</code></pre>
<p>访问 x.x.x.x:7500 并使用自己设置的用户名密码登录，即可看到仪表板界面</p>
<p>注意到两点：</p>
<ol>
<li>只暴露一个 7000 端口就可以了，  客户端任何 N 个服务，不同端口都共享这个（稍后可见）</li>
<li>token 表示客户端启动服务后，与服务端通信需要的凭证。</li>
</ol>
<h3 id="客户端">客户端</h3>
<p>如 windows</p>
<p>下载了“frp_0.22.0_windows_amd64.zip”，将其解压在了C盘根目录下，并且将文件夹重命名为“frp”，可以删除其中的frps和frps.ini文件。</p>
<p>打开frpc.ini</p>
<p>注意 token 是和服务端一样的！！
虽然这里不同的服务，用了 N 个端口 80-&gt;8000  22-&gt;6000  但服务器端其实只有 7000。</p>
<pre><code class="language-config">[common]
server_addr = x.x.x.x
server_port = 7000
token = won517574356

[web]
type = http
local_ip = 127.0.0.1
local_port = 80

#remote_port = 8000 #不需要
custom_domains=   # 必须有一个 subdomains
# remote_port = 8000
custom_domains=   
# 必须有一个 subdomains， 将 www.yourdomain.com 的域名 A 记录解析到 IP x.x.x.x，如果服务器已经有对应的域名，也可以将 CNAME 记录解析到服务器原先的域名。  然后访问 域名:10080 (服务端的vhost_http_port)

[ssh]
type = tcp
local_ip = 127.0.0.1
local_port = 22
remote_port = 6000
token = 12345678

[rdp]
type = tcp
local_ip = 127.0.0.1           
local_port = 3389
remote_port = 7001  

[smb]
type = tcp
local_ip = 127.0.0.1
local_port = 445
remote_port = 7002
</code></pre>
<p>同样用 nohup 启动</p>
<p>自定义规则</p>
<p>“[xxx]”表示一个规则名称，自己定义，便于查询即可。
“type”表示转发的协议类型，有TCP和UDP等选项可以选择，如有需要请自行查询frp手册。
“local_port”是本地应用的端口号，按照实际应用工作在本机的端口号填写即可。
“remote_port”是该条规则在服务端开放的端口号，自己填写并记录即可。</p>
<p>frpc程序不能直接双击运行！</p>
<p>使用命令提示符或Powershell进入该目录下
cd C:\frp
并执行
./frpc -c frpc.ini</p>
<p>不要关闭命令行窗口，此时可以在局域网外使用相应程序访问 x.x.x.x:xxxx （IP为VPS的IP，端口为自定义的remote_port）即可访问到相应服务。</p>
<p>后台运行及开机自启</p>
<p>“frpc.bat”，编辑</p>
<pre><code class="language-shell">@echo off
if &quot;%1&quot; == &quot;h&quot; goto begin
mshta vbscript:createobject(&quot;wscript.shell&quot;).run(&quot;&quot;&quot;%~nx0&quot;&quot; h&quot;,0)(window.close)&amp;&amp;exit
:begin
REM
cd C:\frp
frpc -c frpc.ini
exit
</code></pre>
<p>直接运行这个 .bat 文件即可启动frpc并隐藏窗口（可在任务管理器中退出）。</p>
<p>开机启动，把这个 .bat 文件直接扔进Windows的开机启动文件夹</p>
<h2 id="reload-新配置加密压缩等">reload 新配置，加密、压缩等</h2>
<p><a href="https://blog.fengcl.com/2018/09/10/frp-use/">https://blog.fengcl.com/2018/09/10/frp-use/</a></p>
<p>所有 proxy 配置全部放在客户端(也就是之前版本的特权模式)，服务端和客户端的 common 配置中的 token 参数一致则身份验证通过。</p>
<p>需要注意的是 frpc 所在机器和 frps 所在机器的时间相差不能超过 15 分钟，因为时间戳会被用于加密验证中，防止报文被劫持后被其他人利用。</p>
<p>这个超时时间可以在配置文件中通过 authentication_timeout 这个参数来修改，单位为秒，默认值为 900，即 15 分钟。如果修改为 0，则 frps 将不对身份验证报文的时间戳进行超时校验。</p>
<p>加密与压缩</p>
<pre><code class="language-shell"># frpc.ini
[ssh]
type = tcp
local_port = 22
remote_port = 6000
use_encryption = true
use_compression = true

</code></pre>
<p>客户端热加载配置文件</p>
<pre><code class="language-shell">frpc reload -c ./frpc.ini
</code></pre>
<p>客户端查看代理状态
frpc 支持通过 frpc status -c ./frpc.ini 命令查看代理的状态信息，此功能需要在 frpc 中配置 admin 端口。</p>
<h2 id="域名-nginx-多端口">域名， nginx 多端口</h2>
<p><a href="https://juejin.im/post/5c49313f6fb9a049eb3c488f">https://juejin.im/post/5c49313f6fb9a049eb3c488f</a></p>
<p>用frp运行多个web服务，那么可以结合nginx实现</p>
<p>在 server 上配置 nginx. 代理 frps 服务端 8080 的请求（并处理多个域名）</p>
<pre><code class="language-config">server {
 listen 80;
 server_name app1.* app2.* app3.*;
 ## send request back to apache ##
 location / {
     client_max_body_size 1000m; 
     # 假设frps端口8080
     proxy_pass http://127.0.0.1:8080;  
     proxy_redirect off;
     proxy_set_header X-Real-IP $remote_addr;
     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
     proxy_set_header Host $http_host;
     proxy_set_header X-NginX-Proxy true;
 }
}


server
{
    listen 443 ssl http2;
    server_name home2222.zhishibee.com;

  ssl_certificate     /www/server/panel/ssl/domain_chain.crt;
    ssl_certificate_key /www/server/panel/ssl/domain_key.key;

    location / {
      proxy_pass ....
    }
}
</code></pre>
<p>frps</p>
<pre><code class="language-config">[common]
bind_addr = 0.0.0.0
bind_port = 7000
vhost_http_port = 8080
auth_token = openittoken
subdomain_host = testapp.com
</code></pre>
<p>frpc</p>
<pre><code class="language-config">[common]
server_addr = *.23.72.*
server_port = 7000
#auth_token =openittoken
# 好像是 token 而不是 auth_token 
token=1234566
 
[app1]
type = http
local_port = 8081
 
[app2]
type = http
local_port = 8082
 
[app3]
type = http
local_port = 8083
custom_domains = www.your_domain.com
# 设置认证的用户名
http_user = flyzy2005
# 设置认证的密码
http_pwd = flyzy2005
</code></pre>
<p>然后 将 *.testapp.com解析到你的服务器ip，(泛解析可以一次性搞定) 这样就实现了：</p>
<p>启动frpc即可</p>
<p>这样就实现了</p>
<p>app1.xxx.com  (nginx 80) -&gt; frps (vhost_http_port 8080) -&gt; frpc (app1 8081)
app2.xxx.com  (nginx 80) -&gt; frps (vhost_http_port 8080) -&gt; frpc (app2 8082)</p>
<p>这时打开域名，可能会提示 Not Found  (下方有 frp 的链接)</p>
<p>需要不使用 nohup 运行，而直接运行 frps  多刷新几次，观看输出，一直到出现 success 就可以打开页面了</p>
<p>再重新用 nohup 就好（可能是个bug?）</p>
<p><strong>疑问</strong></p>
<p>如果直接用  webssh.xxx.com:8080 直接用 frp 的 http 8080 端口来访问，  是不是连 nginx 的 80:8080 反向代理都不需要了？？？</p>
<h2 id="没有动态公网-ip-用-frp-或者-花生壳内网穿透访问群晖">没有动态公网 IP, 用 frp, 或者 花生壳内网穿透访问群晖</h2>
<p>frp内网穿透。frp与ngrok比较像，都是反向代理。但frp更开源，而且是国人开发，只要能找到一台在公网的vps服务器并稍作配置就能使用，frp开发者提供了多个版本，s，nas，路由器都有对应使用版本。只要设备能上网。不管有没有公网 IP，都可以让任何一个能上网的机子访问该设备。</p>
<p>打开群晖的SSH服务。（控制面板-终端机和SNMP）</p>
<p>打开home文件夹。“用户账户–高级设置”下有个“启动家目录服务”。这样就可以让home目录可见，frp文件需在这个目录启用。</p>
<p>到www.chuantou.org下载客户端文件，先选择版本，我选的是0.16.1。</p>
<p>选择类型。群晖是linux操作系统，根据配置选型号，我的是386型。</p>
<p>把这三个文件下载下来放到刚才群晖的home文件夹内。</p>
<p>配置frpc.ini文件。右键打开frpc.ini-用文本编辑器打开，参照网上的配置。</p>
<p>xshell 5连接群晖，输入帐号密码登陆linux，</p>
<p>输入命令 启动frp客户端。</p>
<p>./frpc -c ./frpc.ini</p>
<p>为了能够frp客户端后台启动，最后输入命令行:</p>
<p>nohup ./frpc -c ./frpc.ini &amp;</p>
<p>在浏览器输入：(******为刚才配置文件里的自定义名称，frp3.chuantou.org为frp服务器地址）。)</p>
<p>******.frp3.chuantou.org</p>
<p>如果要通过手机端的群晖APP访问，则需要在域名后面加上80端口。</p>
<p>所有访问内网服务器的操作都要走frp服务器的流量</p>
<p>如果是自己的服务器， 就需要修改配置文件， 并在服务器上启动服务端了。</p>
<h2 id="webssh">webssh</h2>
<h3 id="webssh2-通过-frp-nginx-端口转发后-bundlejs-报-404-问题">webssh2 通过 frp +nginx 端口转发后, bundle.js 报 404 问题</h3>
<p>cd webssh2/app</p>
<p>pm2 start npm &ndash; start</p>
<p>浏览器打开：
http://192.168.3.17:2222/ssh/host/127.0.0.1</p>
<h3 id="改用-gateone">改用 GateOne</h3>
<p><a href="https://www.moerats.com/archives/582/">https://www.moerats.com/archives/582/</a></p>
<p>传统方式，太麻烦了。</p>
<pre><code class="language-shell"># 先要有 python2.7 和 tornado 框架
sudo pip install tornado kerberos

#centos
sudo rpm -Uvh gateone*.rpm

# ubuntu
sudo dpkg -i gateone*.deb

# from source
tar zxvf gateone*.tar.gz; cd gateone*; sudo python setup.py install
</code></pre>
<p>docker 方式</p>
<pre><code class="language-shell"># 安装Docker
curl -sSL https://get.docker.com/ | sh
service docker start

sudo docker pull liftoff/gateone

#命令
docker run [-d/-t] -p [443]:8000 -h [hostname] --name gateone liftoff/gateone gateone
#示例，如果服务器上443被占用，请使用其它未被占用的端口
docker run -t -p 443:8000 -h Rats --name gateone liftoff/gateone gateone
docker run -t -p 2222:8000 -h webssh --name gateone liftoff/gateone gateone
</code></pre>
<p>-d/-t：决定镜像是使用Deamon（后台）模式启动，或者显示启动过程
-p 443:8000：绑定端口，注意：GateOne强制使用SSL，8000端口为Docker容器内的固定映射端口，请只改动冒号前面的端口，不要动后面的端口号！
-h hostname：设置Docker容器的主机名（这个将会显示在你的浏览器标题中）
&ndash;name gateone：设置Docker容器的名称（不是主机名），用来docker ps时识别用
liftoff/gateone：镜像名称
gateone：启动命令行，勿动（默认命令行会发生Python io_loop报错，故使用此命令行来避免错误）</p>
<p>安装完成后，进入https://xx.com:端口，如果端口是443，可直接进入https://xx.com，xx.com
可以为IP也可以为域名，地址前面的https别漏掉了，访问时浏览器可能会报不安全，无视即可，如果你想添加SSL证书，请将域名解析到服务器，然后继续往下看。</p>
<p>chrome 必须要 SSL 证书 否则无法访问。。。</p>
<p>添加SSL
想添加SSL证书的，继续看，不想的就跳过。</p>
<p>1、停掉容器</p>
<pre><code class="language-shell">docker kill gateone
</code></pre>
<p>2、导入SSL证书</p>
<p>在root目录创建Dockerfile。</p>
<p>将以下整体复制到命令行</p>
<pre><code class="language-shell">echo &quot;FROM liftoff/gateone
ADD gateone-ssl/ssl.crt /etc/gateone/ssl/certificate.pem
ADD gateone-ssl/ssl.key /etc/gateone/ssl/keyfile.pem
CMD [ &quot;gateone&quot; ]&quot; &gt; ~/Dockerfile
</code></pre>
<p>同目录创建gateone-ssl文件夹，并上传SSL证书。</p>
<pre><code class="language-shell">mkdir gateone-ssl
</code></pre>
<p>然后通过FTP客户端上传SSL证书到gateone-ssl文件夹。没有SSL证书的，请在本博客搜索关键词，很多申请方法。</p>
<p>3、重建镜像
上传SSL成功后，重建镜像，执行命令：名称为 gateone-ssl</p>
<pre><code class="language-shell">docker build -t=&quot;gateone-ssl&quot; .  #英文.别漏掉了
</code></pre>
<p>当出现Successfully Built即重建成功。</p>
<p>4、启动镜像
执行命令：</p>
<pre><code class="language-shell"># 命令 运行来源于镜像名为 gateone-ssl 的容器
docker run [-d/-t] -p [443]:8000 -h [hostname] --name gateone gateone-ssl gateone 

#示例，具体参数参考上面
# 注意和前面的 docker 镜像名区分 docker run -t -p 2222:8000 -h webssh --name gateone liftoff/gateone gateone
docker run -t -p 443:8000 -h Rats --name gateone gateone-ssl gateone
</code></pre>
<p>再去访问https://xx.com:端口/查看SSL证书是否生效。</p>
<p>如果最后一步出现 &ldquo;/gateone&rdquo; is already in use by container错误，请先使用命令：</p>
<p>docker rm gateone
搭建完成后，打开地址，输入IP、端口、用户名、密码就可以登录操作VPS服务器了。</p>
<h2 id="问题">问题:</h2>
<ol start="0">
<li>frpc 里，已经给 docker 版 gateone 配置了 ssl 证书！</li>
<li>frps 所在机器搭建 nginx, 配置 443 -&gt; proxy_pass 127.0.0.1:10443 (已添加证书)， 一直报 502 错误  nginx 错误日志也不行</li>
<li>关掉 nginx, 直接用 frps 的 10443 端口， 用 ip:10443 端口，也报错，page not work</li>
<li>一定要用 frpc 里配置的 custome_domain:10443  就可以访问了</li>
<li>注意除了 webssh（gateone） 还要 frpc 里开 ssh remote 10022 这样， webssh 仅仅是个工具，不能连 127.0.0.1 的</li>
</ol>
<p>太奇怪了， frps 上 nginx 的转发ssl 为啥 502.  (而 80 普通 http 又是ok 的。。。)</p>
<p>解决之道！ 其实把 80 、443 全部转发到 vhost_http_port 就可以了</p>
<p>我遇到了一个坑，我在 README 中看到了 vhost_https_port，以为 HTTP 请求全部走 vhost_http_port 端口，而 HTTPS 请求需要走 vhost_https_port 端口。</p>
<p>于是，在配置 Nginx 的时候就把 listen 80 和 listen 443 写成两个 server。 80 端口的请求转发到 http://127.0.0.1:6666，443 端口的请求转发到 https://127.0.0.1:8443。</p>
<p>理论上似乎可行，但运行起来后， HTTPS 穿透失败了，一直都出现 502 异常。Github 上的 关于「nginx 反代 frp Https 502」的 issues 有好几个，但都没有解决的方案。作者认为，不使用 Nginx 直接请求 frps 的 https 端口是正常的，所以问题应该是在 nginx 那边，他似乎对很多人提这个 issues 感到很反感和无奈。</p>
<p>后面想到 Nginx 的502有可能是 SSL 证书的问题，Nginx 会验证被反代网站的证书。试了一下反代12306同样出现502，而换成百度就可以成功访问。成功锁定问题，就是内网的那台设备没有 SSL 证书。</p>
<p>于是试了一下自签，仍然会出现502。看来自签也不行，估计 Nginx 还会验 CA 证书，只有权威机构颁发的才能验证通过。</p>
<p>正当我想用 Let’s Encrypt，分一个域名去签的 SSL 证书的时候，突然发现，我的公网服务器已经签了一个证书了，为什么我的内网服务器还要再签一个？frps 和 frpc 的连接通讯应该不需要 HTTPS 了，又不是直接暴露的。</p>
<p>只要公网的域名上了 SSL 就够了，不管访问公网服务器的时候是 http 还是 https 请求，统一走 frp 的 http 隧道即可。</p>
<p><a href="https://bingozb.github.io/55.html">https://bingozb.github.io/55.html</a></p>
<pre><code class="language-config">server {
  listen 80;
  listen 443 ssl http2;

  ssl_certificate /usr/local/nginx/conf/ssl/pi.bingo.ren.crt;
  ssl_certificate_key /usr/local/nginx/conf/ssl/pi.bingo.ren.key;

  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
  ssl_ciphers EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;
  ssl_prefer_server_ciphers on;
  ssl_session_timeout 10m;
  ssl_session_cache builtin:1000 shared:SSL:10m;
  ssl_buffer_size 1400;
  add_header Strict-Transport-Security max-age=15768000;
  ssl_stapling on;
  ssl_stapling_verify on;

  server_name pi.bingo.ren;
  access_log /data/wwwlogs/pi.bingo.ren_nginx.log combined;
  index index.html index.htm index.jsp;
  root /data/wwwroot/pi.bingo.ren;

  client_max_body_size 1000m;

  location ~ {
    proxy_pass http://127.0.0.1:6666;
    
    #include proxy.conf;

    proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_set_header X-NginX-Proxy true;
  }
}
</code></pre>
<p>然后 frpc 那边，那个本来要 https 的，改回 http</p>
<pre><code>[bingo_pi_web]
type = http
local_port = 80
remote_port = 6666
custom_domains = pi.bingo.ren
</code></pre>
<p>然后 gateone 改成不需要证书的模式</p>
<p>测试失败。。。。。The page you visit not found.</p>
<p>还是恢复成两个 80， 443，</p>
<p>443 的： 转发到 https 端口+。 客户端 frpc 不需要启动带ssl 的docker容器 + 改成 http</p>
<p>关键： 测试下反代带百度/对比自己的  看是否同样失败 和CA 证书有关  (我估计上面那篇文章是对的， 只不过是针对普通 web 站点的，而我这里 gateone 的 ssl 有某些问题，导致不能这样做 因为这里有 nginx + ssl 443 -&gt; frps https 10443 -&gt; frpc 2222 -&gt; gateone docker 8000 + SSL 环节太多了)</p>
<h1 id="其他-">其他 ：</h1>
<h2 id="httpswwwbilibilicomvideoav62508677--nrp-另外一个"><a href="https://www.bilibili.com/video/av62508677/">https://www.bilibili.com/video/av62508677/</a>  （nrp 另外一个）</h2>
<h2 id="自动启动-frp">自动启动 frp</h2>
<p><a href="https://free-e.net/109">https://free-e.net/109</a></p>
<h2 id="frp-图形界面管理">frp 图形界面管理？</h2>
<h1 id="基于网页的-ssh">基于网页的 ssh</h1>
<h2 id="web-console-的尝试">web console 的尝试</h2>
<p>例如在线的， <a href="https://www.bytelang.com/online/ssh">https://www.bytelang.com/online/ssh</a>  （不安全，慢）</p>
<p>自己搭建的（web console.）</p>
<p>发现即使穿透后，如果公司屏蔽了 TCP 请求。  那也是无法访问的。 （所以上面的这些，只有真正基于浏览器，并不是本地请求的，才OK）</p>
<p>所以需要一些“基于网页”的服务器（走 HTTP）</p>
<h2 id="php-的-web-console">php 的 web console</h2>
<p><a href="http://web-console.org/">http://web-console.org/</a></p>
<p>首先下载后 解压放到 nginx 的某个虚拟主机下。（可以配个 ssl 证书）</p>
<p>然后修改 webconsole.php 的 user password (这个不是系统用户，就是这个脚本一个非常简单的验证。。。。)</p>
<p>然后要修改 php.ini  把这几个函数从 <code>disable_functions</code> 移除， 不然会提示  can&rsquo;t execute command</p>
<p>open_proc  （可以搜索上面那个报错的关键词，找到源码里的对应内容）
shell_exec
exec
passthru
system</p>
<p>好像还一个我忘了。。。</p>
<p>URL 访问， 输入刚设置的 user/password,  输入 whoami  发现是 &ldquo;www&rdquo; （或其他你nginx /php-fpm 对应的用户名）</p>
<p>好像不能运行 su root 等命令。</p>
<p>常见问题：在linux上可以执行php中的shell脚本，但在web端不能够访问：</p>
<p>解决方法：</p>
<p>一般属于权限问题，如 www 用户</p>
<p>一.vi /etc/sudoers</p>
<p>   加入：www ALL=(ALL)  NOPASSWORD:ALL</p>
<p>检查下：
sudo id</p>
<p>二.关闭selinux ， 命令：setforence 0</p>
<p>注意 web console 里，如果用 vi /ping 等需要等待返回结果的命令，是不能用 ctrl+c 中断的。。。。</p>
<h2 id="http-请求转成-tcp">http 请求转成 tcp?</h2>
<p>例如 1.2.3.4:1234(http)  -&gt;  1.2.3.4:22(tcp)</p>
<p>就是下面这些了！！</p>
<h2 id="gateone-比较复杂基于python-的-">gateone 比较复杂，基于python 的 ()</h2>
<p><a href="https://github.com/liftoff/GateOne">https://github.com/liftoff/GateOne</a></p>
<p>先下载文件。 然后</p>
<p>tar zxvf gateone*.tar.gz; cd gateone*; sudo python setup.py install</p>
<h2 id="同类的还有httpsgithubcombillchurchwebssh2-node-的简单">同类的还有https://github.com/billchurch/webssh2 ,node 的简单。</h2>
<p>git clone
cd app
npm install &ndash;production</p>
<p>npm start</p>
<p>http://localhost:2222/ssh/host/127.0.0.1</p>
<p>Docker 安装</p>
<p>更多参数查看主页</p>

    </div>
    <div class="article-footer">
<blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接: </strong>
      <a href="https://my101du.github.io/1/01/%E5%AE%B6%E5%BA%AD%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%9C%A8%E5%A4%96%E8%AE%BF%E9%97%AE/" title="" target="_blank" rel="external">https://my101du.github.io/1/01/%E5%AE%B6%E5%BA%AD%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%9C%A8%E5%A4%96%E8%AE%BF%E9%97%AE/</a>
    </li>
    <li class="post-copyright-license">
      <strong>License：</strong><a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN</a>
    </li>
  </ul>
</blockquote>

<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/my101du" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="https://avatars2.githubusercontent.com/u/1332645?s=460&amp;u=dc114d6baad010456a5af87c4cc2df0694ff2b1c&amp;v=4" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/my101du" target="_blank"><span class="text-dark">my101du</span><small class="ml-1x"></small></a></h3>
        <div>Stay Hungry, Stay Foolish</div>
      </div>
    </figure>
  </div>
</div>
    </div>
  </article>
<section id="comments">
</section>

</div><nav class="bar bar-footer clearfix" data-stick-bottom>
    <div class="bar-inner">
        <ul class="pager pull-left">
            <li class="prev">
                <a href="https://my101du.github.io/1/01/%E5%AE%B6%E5%BA%AD%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%A4%9A%E5%AA%92%E4%BD%93/" title=""><i
                        class="icon icon-angle-left"
                        aria-hidden="true"></i><span>&nbsp;&nbsp;下一篇</span></a>
            </li>
            <li class="next">
                <a href="https://my101du.github.io/1/01/%E5%A6%82%E6%9E%9C%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8D%E6%94%AF%E6%8C%81flash%E5%88%99%E7%9B%B4%E6%8E%A5%E6%98%BE%E7%A4%BApdf/"
                    title=""><span>上一篇&nbsp;&nbsp;</span><i
                        class="icon icon-angle-right" aria-hidden="true"></i></a>
            </li>
            
            <li class="toggle-toc">
                <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false"
                    title="文章目录" role="button">
                    <span>[&nbsp;</span><span>文章目录</span>
                    <i class="text-collapsed icon icon-anchor"></i>
                    <i class="text-in icon icon-close"></i>
                    <span>]</span>
                </a>
            </li>
        </ul>
        <div class="bar-right">
            <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter"
                data-mobile-sites="weibo,qq,qzone"></div>
        </div>
    </div>
</nav>

</main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
<ul class="social-links">
    <li><a href="https://github.com/my101du" target="_blank" title="github" data-toggle=tooltip data-placement=top >
            <i class="icon icon-github"></i></a></li>
    <li><a href="https://my101du.github.io/index.xml" target="_blank" title="rss" data-toggle=tooltip data-placement=top >
            <i class="icon icon-rss"></i></a></li>
</ul>
  <div class="copyright">
    &copy;2017  -
    2020
    <div class="publishby">
        Theme by <a href="https://github.com/xiaoheiAh" target="_blank"> xiaoheiAh </a>base on<a href="https://github.com/xiaoheiAh/hugo-theme-pure" target="_blank"> pure</a>.
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/javascript.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/php.min.js" defer></script><script>
    hljs.configure({
        tabReplace: '    ', 
        classPrefix: ''     
        
    })
    hljs.initHighlightingOnLoad();
</script>
<script src="https://my101du.github.io/js/application.min.bdeb64b910570b6c41badc6a05b7afb0c8ad9efd8525de3c7257d59e786326a3.js"></script>
<script src="https://my101du.github.io/js/plugin.min.51ff8c7317566f82259170fa36e09c4493adc9b9378b427a01ad3f017ebac7dd.js"></script>

<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(未命名)',
            },
            ROOT_URL: 'https:\/\/my101du.github.io\/',
            CONTENT_URL: 'https:\/\/my101du.github.io\/\/searchindex.json ',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script type="text/javascript" src="https://my101du.github.io/js/insight.min.a343cd9a5a7698336b28ef3a7c16a3a1b1d2d5fb17dc8ed04022bbe08cc5459073a15bdafa3a8a58cdd56080784bdd69fa70b1ae8597565c799c57ed00f0e120.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3',
        
        hasInnerContainers: true,
    });
</script>


  </body>
</html>
